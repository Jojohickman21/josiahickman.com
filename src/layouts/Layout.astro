---
import DockWrapper from "@/components/DockWrapper";
import DitherBackground from '@/components/DitherBackground';
import "@/styles/global.css";


interface Props {
  title?: string;
  description?: string;
  showDither?: boolean;
}

const { 
  title = "Josiah Hickman", 
  description = "Personal website of Josiah Hickman",
  showDither = true 
} = Astro.props;

// Check if current page is a project page
const currentPath = Astro.url.pathname;
const isProjectPage = currentPath.startsWith('/projects/') && currentPath !== '/projects' && currentPath !== '/projects/';
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <!-- Favicon -->
    <link rel="icon" href="/pfp.png" type="image/png" />
  </head>
  <body class="relative min-h-screen text-neutral-800 dark:text-neutral-200 overflow-x-hidden">
    <!-- Header with logo -->
    <header id="main-header" class="fixed top-8 left-8 z-10 transition-all duration-300 ease-in-out origin-top-left">
      <div class="p-2 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-md rounded-full border border-neutral-200 dark:border-white/10 shadow-sm transition-all duration-300">
        <img id="header-logo" src="/pfp.png" alt="Logo" class="h-24 w-24 object-cover transition-all duration-300 ease-in-out" />
      </div>
    </header>
{showDither && <DitherBackground client:only="react" />}
    <main class="relative flex flex-col items-center justify-start">
      <slot />
    </main>
    <!-- Floating Dock -->
    <div class="fixed bottom-10 left-0 w-full flex items-center justify-center z-50 pointer-events-none">
      <div class="pointer-events-auto">
        <DockWrapper client:load />
      </div>
    </div>

    <script>
      const header = document.getElementById('main-header');
      const logo = document.getElementById('header-logo');

      window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
          header?.classList.add('header-scrolled');
          logo?.classList.remove('h-24', 'w-24');
          logo?.classList.add('h-10', 'w-10');
        } else {
          header?.classList.remove('header-scrolled');
          logo?.classList.remove('h-10', 'w-10');
          logo?.classList.add('h-24', 'w-24');
        }
      });
    </script>
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    min-height: 100vh;
    font-family: system-ui, -apple-system, sans-serif;
  }

  main {
    min-height: 100vh;
    padding-bottom: 8rem; /* Space for floating dock */
  }

  .header-scrolled {
    top: 1rem;
    left: 1rem;
  }
</style>